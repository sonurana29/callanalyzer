<div class="container">
  <div class="row mt-3 mb-2 pt-5">
    <div class="col-sm-6">
      <h3 style="color: #004f7a !important;">
        <b>Call Analyzers - Dashboard</b>
      </h3>
    </div>
    <div class="col-sm-6 text-end pt-1">
      <h3>
        <button data-bs-toggle="modal" data-bs-target="#myModal" class="btn btn-primary mb-2" (click)="openModal()"><b>Add New Recording</b></button>
      </h3>
    </div>
  </div>
  <div class="row mb-2">
    <div class="col-sm-6">
      <ng-container #chartContainer></ng-container>
       <!-- <div #container1></div> -->
      <highcharts-chart    
       [options]="chartOptions"
  style="width: 100%; height: 400px; display: block;">
</highcharts-chart>
      
    </div>
    <div class="col-sm-6">
        <div id="container2"></div>
       <highcharts-chart      
      [options]="chartbarOptions"
      style="width: 100%; height: 400px; display: block;">
    </highcharts-chart>
    </div>
  </div>
  <div class="row mb-3">    
    <div class="col-sm-12 mt-2">        
        <div class="mt-2 p-4 bg-secondary text-white" style="background-color: #E7E9EB !important;">        
            <h4 style="color: #004f7a !important;">Call Recordings</h4>
            <table class="table">
    <thead>
      <tr>
        <th>Recording Name</th>
        <th>Agent Name</th>
        <th>Customer Name</th>
        <th>Call Duration</th>
        <th>Inbound/Outbound</th>
        <th>Sentiment</th>  
        <th>Compliance</th>
        <th>Details</th>             
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of recordDetails">
        <td>{{item.recordingName}} </td>
        <td>{{item.agentName}}</td>
        <td>{{item.customerName}}</td>
        <td>{{item.callDuration}}</td>
        <td [hidden]="!item.isInboundCall"> <div class="badge badge-inbound">Inbound</div></td>
        <td [hidden]="item.isInboundCall"><div class="badge badge-outbound">Outbound</div></td>
        <td>{{item.sentiment}}</td>
        <td class="ps-5">{{item.compliance}}</td>
        <!-- <td style="text-decoration: underline; cursor: pointer; color: blue;" (click)="getById(item.id)">Detail</td> -->
         <td>
            <a href="javascript:void()" (click)="getById(item.id)" style="text-decoration: none;">View <i class="fa fa-eye"></i></a>
        </td>
      </tr>
      <tr *ngIf="recordDetails.length === 0">
        <td colspan="4" class="text-center">No records found</td>
      </tbody>
  </table>
        </div>
    </div>
    <div class="col-sm-12 mt-2">
      
    </div>
  </div>
</div>

<div class="modal" id="myModal">
  <div class="modal-dialog">
    <div class="modal-content" >

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title" style="color: #004f7a !important;">Upload Recording</h4>
        <!-- <button type="button" class="btn-close" data-bs-dismiss="modal"></button> -->
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <input type="file" (change)="onFileSelected($event)" />
        <p><button class="btn btn-primary mt-3" (click)="uploadFile()">Upload</button></p>
        
        <p *ngIf="uploadMessage">{{ uploadMessage }}</p>
    <!-- <button (click)="closeModal()">Close</button> -->
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-warning" data-bs-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>




<!-- <div class="modal-backdrop" *ngIf="showModal">
  <div class="modal-content">
    <h2>Modal Title</h2>
    <input type="file" (change)="onFileSelected($event)" />
   <button (click)="uploadFile()">Upload</button>
    <p *ngIf="uploadMessage">{{ uploadMessage }}</p>
    <button (click)="closeModal()">Close</button>
  </div>
</div> -->

<!-- <br>
<button (click)="getById(1)">Get Record by ID</button> -->
<div id="loader-overlay" [hidden]="isHidden">
   <div class="loader"></div>
</div>